<th:block th:replace="~{fragments/header :: headerFragment}"></th:block>

<div class="col-md-9 mx-auto">

    <br/>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
            </ul>
            <!--검색 영역-->
            <form class="form-inline my-2 my-lg-0" action="/" method="GET" role="search">
                <input class="form-control mr-sm-2" type="text" name="searchKeyword" id="search" placeholder="검색어를 입력하세요."
                       th:value="${param.searchKeyword}">
                <button class="btn btn-light">검색</button>
            </form>
        </div>
    </nav>

    <!-- 목록 출력 영역 -->
    <table class="table table-horizontal table-bordered">
        <thead class="thead-strong">
            <tr>
                <th style="width: 10%; text-align: center">번호</th>
                <th style="width: 50%; text-align: center">제목</th>
                <th style="width: 10%; text-align: center">작성자</th>
                <th style="width: 20%; text-align: center">최종수정일</th>
                <th style="width: 10%; text-align: center">조회수</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr th:each="post : ${postsPages}">
                <td style="text-align: center" th:text="${post.id}"></td>
                <td><a th:href="@{'/posts/read/' + ${post.id}}" th:text="${post.title}"></a></td>
                <td style="text-align: center" th:text="${post.author}"></td>
                <td style="text-align: center" th:text="${post.modifiedDate}"></td>
                <td style="text-align: center" th:text="${post.view}"></td>
            </tr>
        </tbody>
    </table>

    <!--페이지네이션-->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <!-- 첫번째 페이지로 이동 -->
            <li class="page-item">
                <a class="page-link" th:href="${postsPages.first} ? '#' : @{/(page=0)}" aria-label="Previous">
                    <span aria-hidden="true">처음</span>
                </a>
            </li>
            <!-- 이전 링크 활성화 비활성화 -->
            <li class="page-item">
                <a class="page-link" th:href="${postsPages.first} ? '#' : @{/(page=${postsPages.number - 1})}" aria-label="Previous">
                    <span aria-hidden="true">이전</span>
                </a>
            </li>
            <th:block th:each="page: ${#numbers.sequence(startPage, endPage)}">
                <a class="page-link"
                   th:if="${page != nowPage}"
                   th:href="@{/(page = ${page - 1}, searchKeyword = ${param.searchKeyword})}"
                   th:text="${page}">
                </a>
                <strong class="page-link" th:if="${page == nowPage}" th:text="${page}"></strong>
            </th:block>
            <!-- 다음 링크 활성화 비활성화 -->
            <li class="page-item">
                <a class="page-link" th:href="${postsPages.last} ? '#' : @{/(page=${postsPages.number + 1})}" aria-label="Next">
                    <span aria-hidden="true">다음</span>
                </a>
            </li>
            <!-- 마지막 페이지로 이동 -->
            <li class="page-item">
                <a class="page-link" th:href="${postsPages.last} ? '#' : @{/(page=${postsPages.totalPages - 1})}" aria-label="Previous">
                    <span aria-hidden="true">끝</span>
                </a>
            </li>
        </ul>
        <a href="/posts/save" role="button"
           class="btn btn-primary float-right">글 등록</a>
    </nav>

</div>

<th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>